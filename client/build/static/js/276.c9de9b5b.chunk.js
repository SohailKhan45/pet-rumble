"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[276],{3276:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(5043),i=a(3061),s=(a(9423),a(2127)),r=a(7149),d=a(5239),l=a.n(d),c=a(7762),o=a(579);const u=e=>{let{show:t,print:a,setPrint:i,userID:d}=e;const[u,h]=(0,n.useState)("Copy link"),v=document.location.href.split("/"),x="".concat(v[0],"//").concat(v[2],"/verify/vaccination/").concat(d);return(0,o.jsxs)("div",{className:"sharePannel ".concat(t&&!a?"displayVisible":"displayHidden"),children:[(0,o.jsx)("button",{type:"button",title:"Copy",onClick:()=>{navigator.clipboard.writeText(x),h("Copied"),setTimeout((()=>{h("Copy link")}),2e3)},children:(0,o.jsxs)("div",{children:[(0,o.jsx)(r.kn0,{})," \xa0 ",u]})}),(0,o.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://api.whatsapp.com/send?text=".concat("Hey, Check out my dog's vaccinations:"," ",document.location.href+"/"+d),children:(0,o.jsxs)("div",{children:[(0,o.jsx)(s._QQ,{})," \xa0 Share"]})}),(0,o.jsx)("button",{type:"button",onClick:async()=>{await i(1);const e=document.querySelector(".vaccinationWrapper");l()(e,{scale:"3"}).then((e=>{const t=e.toDataURL("img/png"),a=new c.uE("p","px"),n=a.internal.pageSize.getWidth(),i=a.internal.pageSize.getHeight();a.addImage(t,"PNG",0,0,n,i),a.save("Pet Health Card.pdf")})),i(0)},children:(0,o.jsxs)("div",{children:[(0,o.jsx)(s.thW,{})," \xa0 Save as pdf"]})})]})};var h=a(9436),v=a(2145),x=a(1434),m=a(3216),j=a(2693);const p=()=>{var e,t,a,r;const d=(0,m.Zp)(),[l,c]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[f,N]=(0,n.useState)(""),[b,S]=(0,n.useState)(""),[y,C]=(0,n.useState)(""),[P,D]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[I,F]=(0,n.useState)(""),[R,U]=(0,n.useState)(""),[H,E]=(0,n.useState)(""),[T,V]=(0,n.useState)(""),[W,A]=(0,n.useState)([]),[B,L]=(0,n.useState)(!0),[q,z]=(0,n.useState)({name:"",batchNumber:null,date:null,dueDate:null}),[_,O]=(0,n.useState)(!0),[Q,Z]=(0,n.useState)(!1),[$,G]=(0,n.useState)("Edit"),[K,M]=(0,n.useState)(!1);document.addEventListener("click",(()=>Z(!1))),(0,n.useEffect)((()=>{Y()}),[]);const X=e=>{e.currentTarget.type="date"},J=e=>{e.currentTarget.type="text",e.currentTarget.placeholder="Date"},Y=async()=>{const e=await(0,j.b)("profiledata");let t=e.data;if(401===e.status)return v.oR.error("Kindly login first!"),void d("/verify/login");"ok"===t.status?(L(!1),N(t.foundUser._id),S(t.foundUser.name),C(t.foundUser.breed),D(t.foundUser.weight),k(t.foundUser.allergies),F(t.foundUser.conditions),U(t.foundUser.vetName),E(t.foundUser.vetNumber),V(t.foundUser.vetAddress),A(t.foundUser.vaccinations)):v.oR.error("Please refresh")};return(0,o.jsxs)("div",{className:"vaccinationWrapper",children:[(0,o.jsx)("div",{className:"shareIconContainer ".concat(p?"vaccPrintHide":"vaccPrintShow"),onClick:()=>c(!l),children:(0,o.jsx)(s.MX,{})}),(0,o.jsx)(u,{show:l,print:p,setPrint:g,userID:f}),(0,o.jsxs)("div",{className:"headerContainer",children:[(0,o.jsxs)("div",{className:"logoInfoContainer",children:[(0,o.jsx)("img",{src:h,alt:"Website logo",loading:"lazy"}),(0,o.jsx)("h3",{children:"PetRumble"})]}),(0,o.jsx)("h1",{children:"PET HEALTH RECORD"})]}),(0,o.jsxs)("div",{className:"healthInfoWrapper",children:[(0,o.jsxs)("button",{id:"vaccinationButton",className:"editButton ".concat(p?"vaccPrintHide":"vaccPrintShow"),onClick:async e=>{if(e.preventDefault(),"Edit"===$)return O(!1),G("Save"),void M(!K);if(H&&""!==H.toString()&&!H.toString().match(/^[0-9]{10}$/))return void v.oR.error("Please enter a valid 10-digit phone number.");if(P<=0)return void v.oR.error("Please enter a valid weight");if(!/^[a-zA-Z]+$/.test(R)||""===R)return void v.oR.error("Please enter a valid veterinarian name");200===(await(0,j.L)("updateProfile",{petName:b,breed:y,weight:P,allergies:w,conditions:I,vetName:R,vetNumber:H,vetAddress:T})).status?(v.oR.success("Successfully updated!"),O(!0),G("Edit"),M(!K)):v.oR.error("Please refresh")},children:[" ",K?(0,o.jsx)(x.dtF,{className:"editIcon"}):(0,o.jsx)(x.kuV,{className:"editIcon"}),"\xa0",$]}),B?(0,o.jsx)(i.ni,{}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"healthInfoContainer",children:[(0,o.jsx)("h1",{id:"vaccinationSubheading",children:"Pet's Details"}),(0,o.jsxs)("h1",{children:["Name: ",(0,o.jsx)("span",{children:b})]}),(0,o.jsxs)("div",{className:"dogHealthInfo",children:[(0,o.jsxs)("h1",{children:["Breed: ",(0,o.jsx)("span",{children:y})]}),(0,o.jsxs)("div",{className:"dogWeight",children:[(0,o.jsxs)("h1",{children:["Weight:",(0,o.jsx)("input",{id:"weight",disabled:_,type:"number",value:null!==P&&void 0!==P?P:"",onChange:e=>{D(e.target.value)}})]}),(0,o.jsx)("h1",{className:"dogWeightUnit",children:P?"kg":""})]}),(0,o.jsx)("div",{children:(0,o.jsxs)("h1",{children:["Allergies:",(0,o.jsx)("input",{disabled:_,className:"inputAllergiesConditions",type:"text",value:null!==w&&void 0!==w?w:"",onChange:e=>{k(e.target.value)}})]})}),(0,o.jsx)("div",{children:(0,o.jsxs)("h1",{children:["Conditions:",(0,o.jsx)("input",{disabled:_,className:"inputAllergiesConditions",type:"text",value:null!==I&&void 0!==I?I:"",onChange:e=>{F(e.target.value)}})]})})]})]}),(0,o.jsxs)("div",{className:"healthInfoContainer",children:[(0,o.jsx)("h1",{id:"vaccinationSubheading",children:"Veterinarian's Details"}),(0,o.jsxs)("h1",{className:"vetNameInfo",children:["Name:",(0,o.jsx)("h1",{className:"vetHonorific",children:R?"Dr.":""}),(0,o.jsx)("input",{disabled:_,type:"text",value:null!==R&&void 0!==R?R:"",onChange:e=>{U(e.target.value)},className:"vetName"})]}),(0,o.jsxs)("div",{className:"vetInfo",children:[(0,o.jsxs)("h1",{children:["Contact Number:",(0,o.jsx)("input",{disabled:_,type:"number",value:null!==H&&void 0!==H?H:"",maxLength:10,onChange:e=>{E(e.target.value)}})]}),(0,o.jsxs)("h1",{children:["Location:",(0,o.jsx)("input",{disabled:_,type:"text",value:null!==T&&void 0!==T?T:"",onChange:e=>{V(e.target.value)}})]})]})]})]}),(0,o.jsxs)("div",{className:"vaccinationContainer",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"vaccinationInfoPrimary",children:[(0,o.jsx)("h1",{id:"vaccinationSubheading",children:"Vaccinations"}),(0,o.jsxs)("button",{id:"vaccinationButton",form:"vaccinationForm",className:"".concat(p?"vaccPrintHide":"vaccPrintShow"),children:[Q?(0,o.jsx)(x.kuV,{className:"addIcon"}):(0,o.jsx)(x.tNe,{className:"addIcon"}),"\xa0",Q?"Save":"Add"," "]})]}),(0,o.jsx)("form",{name:"Vaccination Form",id:"vaccinationForm",onSubmit:async e=>{if(e.preventDefault(),e.stopPropagation(),!Q)return void Z(!Q);if(new Date(q.dueDate)<=new Date(q.date))return void v.oR.error("Next visit date should be after the vaccination date.");200===(await(0,j.L)("updateVaccinations",{visit:q})).status?(v.oR.success("Successfully updated!"),Y(),Z(!Q),z({name:"",batchNumber:null,date:null,dueDate:null})):v.oR.error("Please refresh")}}),(0,o.jsxs)("table",{className:"vaccinationTable",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Name"}),(0,o.jsx)("th",{children:"Batch Number"}),(0,o.jsx)("th",{children:"Date"}),(0,o.jsx)("th",{children:"Next visit"})]})}),(0,o.jsxs)("tbody",{children:[Q&&(0,o.jsxs)("tr",{className:"addVaccinationForm",children:[(0,o.jsx)("td",{children:(0,o.jsx)("input",{required:!0,type:"text",placeholder:"Name",form:"vaccinationForm",value:null!==(e=q.name)&&void 0!==e?e:"",onChange:e=>z((t=>({...t,name:e.target.value})))})}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"number",placeholder:"Batch no",className:"batch",form:"vaccinationForm",value:null!==(t=q.batchNumber)&&void 0!==t?t:"",onChange:e=>z((t=>({...t,batchNumber:e.target.value})))})}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{required:!0,placeholder:"Date",onFocus:X,onBlur:J,form:"vaccinationForm",value:null!==(a=q.date)&&void 0!==a?a:"",onChange:e=>z((t=>({...t,date:e.target.value})))})}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{required:!0,placeholder:"Next Visit",onFocus:X,onBlur:J,form:"vaccinationForm",value:null!==(r=q.dueDate)&&void 0!==r?r:"",min:q.date?(e=>{const t=new Date(e);return t.setDate(t.getDate()+1),t.toISOString().split("T")[0]})(q.date):"",disabled:!q.date,onChange:e=>z((t=>({...t,dueDate:e.target.value})))})})]}),B?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Fy,{}),(0,o.jsx)(i.Fy,{}),(0,o.jsx)(i.Fy,{})]}):null!==W&&void 0!==W&&W.length?W.map((e=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),(0,o.jsx)("td",{children:null!==e&&void 0!==e&&e.batchNumber?null===e||void 0===e?void 0:e.batchNumber:"-"}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.date.slice(0,10)}),(0,o.jsx)("td",{children:null===e||void 0===e?void 0:e.dueDate.slice(0,10)})]},null===e||void 0===e?void 0:e._id))):!Q&&(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,children:"No vaccination records added "})})]})]})]})]})]})}},9423:()=>{}}]);
//# sourceMappingURL=276.c9de9b5b.chunk.js.map