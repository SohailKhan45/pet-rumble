{"version":3,"file":"static/js/614.bef42695.chunk.js","mappings":"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","sources":["pages/UserProfile.js"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport React, { useState, useEffect } from \"react\";\nimport \"../styles/userProfile.css\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { PiDogFill } from \"react-icons/pi\";\nimport { calculateAge } from \"../utils/common\";\nimport { getData, postData } from \"../utils/api\";\n\nconst UserProfile = () => {\n  const { id } = useParams();\n  const [name, setName] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [breed, setBreed] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [image, setImage] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [button, setButton] = useState(\"Connect +\");\n  const [userID, setUserId] = useState(\"\");\n  const [vaccination, setVaccintion] = useState(\"\");\n  const navigate = useNavigate();\n  const [isRemoving, setIsRemoving] = useState(false);\n\n  useEffect(() => {\n    const fetchID = async () => {\n      const response = await getData(\"profiledata\");\n      let data = response.data;\n      if (response.status === 401) {\n        toast.error(\"Kindly login first!\");\n        navigate(\"/verify/login\");\n        return;\n      }\n      if (data.status === \"ok\") {\n        setUserId(data.foundUser._id);\n      }\n    };\n\n    const fetchData = async () => {\n      try {\n        const response = await postData(\"userdata\", { userID: id });\n        let data = response.data;\n        if (data.status === \"ok\") {\n          setName(data.foundUser.name);\n          setBreed(data.foundUser.breed);\n          setGender(data.foundUser.gender);\n          setImage(data.foundUser.image);\n          setBio(data.foundUser.bio);\n          data.foundUser.requestRecieved.includes(userID)\n            ? setButton(\"Pending...\")\n            : setButton(\"Connect +\");\n          data.foundUser.friends.includes(userID) ? (\n            setButton(isRemoving ? \"Removing...\" : \"Remove\")\n          ) : (\n            <></>\n          );\n          const { ageInYears, ageInMonths, ageInDays } = calculateAge(\n            data.foundUser.dob\n          );\n          if (ageInYears >= 1) {\n            setAge(ageInYears + \" years\");\n          } else if (ageInMonths >= 1) {\n            setAge(ageInMonths + \" months\");\n          } else {\n            setAge(ageInDays + \" days\");\n          }\n        } else {\n          toast.warn(\"Kindly login first.\");\n        }\n      } catch (err) {\n        console.log(err);\n        toast.error(\"There was an error. Kindly referesh the page.\");\n      }\n    };\n    fetchID();\n    fetchData();\n  }, [id, userID, button]);\n\n  const handleRemove = async (e) => {\n    setIsRemoving(true);\n    setButton(\"Removing...\");\n    try {\n      const response = await postData(\"removeFriend\", { friendID: id });\n      let data = response.data;\n      if (data.status === \"ok\") {\n        setButton(\"Connect +\");\n        toast.success(\"Successfully removed.\");\n      }\n    } catch (error) {\n      toast.error(\"There was an error while performing this action.\");\n      setButton(\"Remove\");\n      setIsRemoving(false);\n      return;\n    }\n  };\n\n  const handleConnect = async (event) => {\n    if (button === \"Pending...\") {\n      toast.warn(\"Request already sent.\");\n      return;\n    }\n    if (button === \"Remove\") {\n      handleRemove();\n      return;\n    }\n    try {\n      const response = await postData(\"addFriend\", {\n        id,\n      });\n      let data = response.data;\n      if (data.status === \"ok\") {\n        toast.success(\"Request Successfully sent.\");\n        setButton(\"Pending...\");\n      } else {\n        toast.warn(data.status);\n      }\n    } catch (err) {\n      toast.error(\"There was an error. Please try again or refresh the page.\");\n      return;\n    }\n  };\n  return (\n    <>\n      <div className=\"userProfileWrapper\">\n        <div className=\"userProfileContainer\">\n          <div className=\"userProfilePrimary\">\n            <h1>{name}</h1>\n            <div className=\"exploreUserProfilePictureContainer\">\n              {image ? (\n                <img\n                  className=\"exploreUserProfilePicture\"\n                  src={image}\n                  alt=\"Profile\"\n                  loading=\"lazy\"\n                />\n              ) : (\n                <PiDogFill className=\"exploreUserProfileDogIcon\" />\n              )}\n            </div>\n            <h4>{bio}</h4>\n          </div>\n          {id === userID ? (\n            \"\"\n          ) : (\n            <button\n              id=\"userProfileButton\"\n              onClick={handleConnect}\n              disabled={isRemoving}\n            >\n              {button}\n            </button>\n          )}\n          <div className=\"userProfileSecondary\">\n            <h2>\n              Breed<p>{breed}</p>\n            </h2>\n            <h2>\n              Age<p>{age}</p>\n            </h2>\n            {id === userID ? (\n              \"\"\n            ) : (\n              <h2 className=\"profileButton\">\n                <button id=\"profileButton\" onClick={handleConnect}>\n                  {button}\n                </button>\n              </h2>\n            )}\n            <h2>\n              Gender<p>{gender}</p>\n            </h2>\n            <h2>\n              Vaccinated<p>{vaccination ? \"Yes\" : \"No\"}</p>\n            </h2>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default UserProfile;\n"],"names":["UserProfile","id","useParams","name","setName","useState","age","setAge","breed","setBreed","gender","setGender","image","setImage","bio","setBio","button","setButton","userID","setUserId","vaccination","setVaccintion","navigate","useNavigate","isRemoving","setIsRemoving","useEffect","async","response","getData","data","status","toast","error","foundUser","_id","fetchID","postData","requestRecieved","includes","friends","_Fragment","ageInYears","ageInMonths","ageInDays","calculateAge","dob","warn","err","console","log","fetchData","handleConnect","success","friendID","handleRemove","_jsx","children","className","_jsxs","src","alt","loading","PiDogFill","onClick","disabled"],"sourceRoot":""}